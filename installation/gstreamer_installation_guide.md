# üé• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞ GStreamer —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π NVENC/NVDEC –∏ VAAPI

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ —Å–æ–±—Ä–∞—Ç—å `gst-plugins-bad` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `nvcodec` (CUDA/NVENC) –∏ `vaapi` –Ω–∞ Linux.

---

## üì¶ –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
sudo apt install \
  build-essential meson ninja-build \
  libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev \
  libx11-dev libxext-dev \
  libva-x11-2 \
  gstreamer1.0-tools gstreamer1.0-gl gstreamer1.0-libav
```

–≠—Ç–∏ –ø–∞–∫–µ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GStreamer —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –∏ –º—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏.

---

## üîΩ –®–∞–≥ 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ `gst-plugins-bad`

```bash
git clone https://gitlab.freedesktop.org/gstreamer/gst-plugins-bad.git -b 1.20.3
cd gst-plugins-bad
```

–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è `1.20.3` –ø–ª–∞–≥–∏–Ω–æ–≤ GStreamer, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É NVDEC/NVENC.

---

## ‚öôÔ∏è –®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ —Å Meson

```bash
meson setup build \
  --prefix=/usr \
  -Dnvcodec=enabled \
  -Dc_args="-I/usr/local/cuda/include" \
  -Dc_link_args="-L/usr/local/cuda/lib64"
```

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º:**
- `--prefix=/usr`: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—É—Ç—å.
- `-Dnvcodec=enabled`: –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–¥–µ–∫–æ–≤ NVIDIA (NVDEC/NVENC).
- `-Dc_args`: –ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–ª–∞–≥–∞ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ CUDA.
- `-Dc_link_args`: –ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–ª–∞–≥–∞ –¥–ª—è –ª–∏–Ω–∫–æ–≤–∫–∏ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ CUDA.

---

## üõ†Ô∏è –®–∞–≥ 4: –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
ninja -C build
sudo ninja -C build install
```

---

## ‚úÖ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤

```bash
gst-inspect-1.0 nvcodec
gst-inspect-1.0 nvh264dec
gst-inspect-1.0 vaapi
```

–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–ª–∞–≥–∏–Ω–∞—Ö, –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CUDA Toolkit —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø—É—Ç–∏ `/usr/local/cuda`.
- –î–ª—è —Ä–∞–±–æ—Ç—ã —Å `vaapi` —Ç–∞–∫–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥—Ä–∞–π–≤–µ—Ä Intel (–Ω–∞–ø—Ä–∏–º–µ—Ä, `intel-media-va-driver`).
- –î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `nvh264dec`, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ `nv-codec-headers` –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ CUDA –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥—Ä–∞–π–≤–µ—Ä–∞ NVIDIA.

---
